# SmartAquarium
Скетч для управления оборудованием аквариума.

Поддерживает следующее оборудование
- Датчик температуры DS18B20 для съема температуры внтури аквариума
- Левая лампа освещения (подключена через реле на 220 в)
- Средняя лампа освещения (подключена через реле на 220 в)
- Правая лампа освещения (подключена через реле на 220 в)
- Нагреватель воды в аквариуме (подключен через реле на 220 в)
- Часы реального времени DS3231 (используется для стабильной работы в случаях прервыания электропитания)
- Модуль кнопок и светодиодной индикации TM1638 (используется для индикации и настройки работы аквариума:
	будильник, таймер, рассвет, закат и подобное)

Использование клавиш TM1638

Нумерация клавиш слева направо:
1 2 3 4 5 6 7 8
1 - клавиша отмены действия
2 - клавиша ввода
3 - клавиша лево
4 - клавиша право
5 - клавиша вниз
6 - клавиша вверх
7 - не используется
8 - ручное управление светом

Пространственная схема меню:

0		1	
0.1		1.1
0.2		1.2
0.3		1.3
0.4
0.5

Организация перемещения по настройкам и их редактирование:

Перемещение между пунктаме меню осуществляется клавишами вверх, вниз, влево, вправо.
Меню не является круговым, т.е. с пункта 0 влево или вверх не уходит.
Влево или врпаво, если оно возможно перемещение осуществляется только в верхнем уровне меню, но не в подменю.
Например с подменю 0.1 можно уйти только вверз на пункт 0 или вниз на пункт 0.2 , но с пукнта 0 можно уйти
не только вниз на 0.1 , но и влево на 1.
Вход в редактирование настроек конкретного меню осущестляется по клавише ввода; редактирование значения(-й) меню
по клавишам влево, вправо; ввод значения и переход к следующией настройке (выход из редактирования если следующего
значения нет) по клавише ввода.
Клавиша отмены в режиме редактирования отменяет ввод значения и выходит из режим редактирования. Повторное нажатие
(или нажатие без редактирования) в подменю возвращает в ссответсвующее меню (напрмиер из подменю 1.3 в меню 1).
Повторное нажатие в меню возвразщает в начальное меню 0. Таким образом многократное нажатие отмены всегда возвращает
в меню часов 0.

Описание пунктов меню:

0 - меню "часы"
0.1 - подменю таймера
0.2 - подменю настройки дня (время включения освещения)
0.3 - подменю настройки ночи (время отключения освещения)
0.4 - подменю будильника
0.5 - подменю интервала времени между лампами (включение или выключение слева-направо через заданный интервал)

1 - меню "температуры" (отражает тепературу внутри корпуса с DS3231 и тепературу внутри аквариума с DS18B20)
1.1 - настройка температуры воды аквариума днем (или отключить нагреватель днем)
1.2 - настройка температуры воды аквариума ночью (или отключить нагреватель ночью)
1.3 - люфт температуры (т.е. при падении температуры ниже установленно минус люфт будет включен нагреватель,
	при увеличении температуры выше установленной плюс люфт нагреватель будет выключен)